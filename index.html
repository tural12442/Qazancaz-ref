<!DOCTYPE html>
<html lang="az">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title id="pageTitle">Qazanc AZ</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
/* --- R∆èNG D∆èYƒ∞≈û∆èNL∆èRƒ∞ (VARS) --- */
:root {
  /* LIGHT TEMA (Aƒü/Qƒ±rmƒ±zƒ±) - Default */
  --bg-start: #ffffff; 
  --bg-end: #f0f0f0;   
  --card-bg: rgba(255, 255, 255, 0.85); 
  --card-border: rgba(0, 0, 0, 0.1);
  --text-light: #ffffff;
  --text-dark: #1B1B1B;
  --accent: #FF0000; 
  --menu-bg: rgba(255, 255, 255, 0.15);
  --progress-bg: rgba(0, 0, 0, 0.08);
  --input-text: #1B1B1B; 

  /* Qƒ±rmƒ±zƒ± Gradientl…ôr */
  --btn-gradient-start: #FF416C; 
  --btn-gradient-end: #FF4B2B;   
  --btn-shadow: rgba(255, 65, 108, 0.4); 
  --secondary-btn-gradient-start: #ffc371; 
  --secondary-btn-gradient-end: #ff5f6d; 
}

/* DARK TEMA (Qara/Qƒ±rmƒ±zƒ±) */
body.dark-theme {
  --bg-start: #1b1b1b; 
  --bg-end: #252525;   
  --card-bg: rgba(45, 45, 45, 0.95); 
  --card-border: rgba(255, 255, 255, 0.1);
  --text-light: #ffffff;
  --text-dark: #f0f0f0;
  --accent: #FF4B2B; 
  --menu-bg: rgba(0, 0, 0, 0.3);
  --progress-bg: rgba(255, 255, 255, 0.15);
  --input-text: #ffffff; 
}

/* --- √úMUMƒ∞ STƒ∞LL∆èR --- */
*{box-sizing:border-box;margin:0;padding:0;}
body{
  font-family:'Inter',sans-serif;
  background:linear-gradient(135deg,var(--bg-start),var(--bg-end));
  background-size:400% 400%;
  animation:bgMove 12s ease infinite;
  color:var(--text-dark);
  min-height:100vh;
  user-select:none;
  -webkit-user-select:none;
  -webkit-tap-highlight-color:transparent;
  transition: background-color 0.5s, color 0.5s; 
}
@keyframes bgMove{
  0%{background-position:0% 50;}
  50%{background-position:100% 50;}
  100%{background-position:0% 50;}
}

/* Kontent Konteyneri */
.container{
  max-width:480px;
  margin:auto;
  padding:20px;
  padding-top:20px;
  padding-bottom: 100px; /* Menyudan yuxarƒ±da bo≈üluq */
} 

/* Dƒ∞L V∆è TEMA SE√áƒ∞Mƒ∞ */
.top-controls {
    display: flex;
    justify-content: space-between; 
    align-items: center;
    margin-bottom: 20px;
}
.lang-switcher-container {
    position: relative;
}
.lang-current-btn, .theme-toggle-btn {
    padding: 6px 10px;
    border: 1px solid var(--card-border);
    background: var(--card-bg);
    color: var(--text-dark);
    font-weight: 700;
    cursor: pointer;
    transition: 0.3s;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    display: flex;
    align-items: center;
    height: 40px; 
}
.lang-current-btn span {
    margin-right: 5px; 
}
.lang-current-btn:hover, .theme-toggle-btn:hover {
    box-shadow: 0 4px 15px rgba(255,0,0,0.2);
}

/* Tema ke√ßid simvolu √º√ß√ºn x√ºsusi stil */
.theme-icon {
    font-size: 20px;
}

.lang-dropdown {
    position: absolute;
    top: 100%; 
    right: 0;
    margin-top: 5px;
    background: var(--card-bg);
    border-radius: 10px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    overflow: hidden;
    z-index: 10;
    min-width: 60px;
    display: none;
    backdrop-filter: blur(8px);
    border: 1px solid var(--card-border);
}
.lang-dropdown.show {
    display: block;
}
.lang-dropdown button {
    width: 100%;
    padding: 8px 15px;
    border: none;
    background: none;
    color: var(--text-dark);
    font-weight: 600;
    text-align: center; 
    cursor: pointer;
    transition: background 0.2s;
    display: block; 
}

.lang-dropdown button:hover, .lang-dropdown button.active {
    background: var(--accent);
    color: var(--text-light);
}

/* S∆èHƒ∞F∆èL∆èRƒ∞N D√úZ∆èNL∆èNM∆èSƒ∞ */
.page{
    display:none;
    animation:fadeIn .4s ease;
    /* D√ºz…ôli≈ü: S…ôhif…ô kontentini d√ºz…ôltm…ôk */
    min-height: calc(100vh - 120px); 
    overflow-y: auto; 
    padding-bottom: 10px; 
}
.page.active{display:block;}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}

/* Balans v…ô Kart Dizaynƒ± */
.balance-card, .ad-card, .task-card, .game-card{
  background:var(--card-bg);
  border-radius:25px;
  padding:20px 18px;
  margin-bottom:20px;
  box-shadow:0 12px 40px rgba(0,0,0,0.25);
  backdrop-filter:blur(14px);
  text-align:center;
  border:1px solid var(--card-border);
  transition: background-color 0.5s, box-shadow 0.5s;
}
.balance-card h3{font-size:16px;color:var(--accent);margin-bottom:8px;letter-spacing:0.5px;}
.balance-card .amount{font-size:32px;font-weight:700;margin-top:5px;color:var(--text-dark);text-shadow:0 2px 5px rgba(0,0,0,0.1);}
.balance-card .usd{font-size:14px;color:var(--text-dark);opacity:0.7;margin-top:4px;}

/* Metod Siyahƒ±sƒ± */
.method-list{display:flex;flex-wrap:wrap;gap:10px;margin:12px 0;justify-content:space-between;}
.method{
    flex:1 1 calc(50% - 10px);
    padding:14px;
    border-radius:14px;
    background:linear-gradient(90deg,var(--btn-gradient-start),var(--btn-gradient-end)); 
    color:var(--text-light);
    text-align:center;
    font-weight:700;
    cursor:pointer;
    transition:0.3s;
    display:flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100px;
    position: relative;
}
.method:hover{transform:scale(1.03);box-shadow:0 0 10px rgba(0,0,0,0.2);}
.method-logo{
    width: 50px;       
    height: 50px;      
    margin-bottom: 6px;
    border-radius: 8px; 
    object-fit: contain; 
    background-color: #fff;
    padding: 4px; 
}
.method-logo.bank-logo {
    border-radius: 6px; 
    padding: 2px;
}
.method-text {
    font-size: 14px;
}
.min-withdraw-label {
    position: absolute;
    bottom: 5px;
    right: 5px;
    font-size: 10px;
    font-weight: 600;
    color: #fff;
    background: rgba(0, 0, 0, 0.4);
    padding: 1px 4px;
    border-radius: 4px;
}
.ad-card{margin-bottom:12px;}
.ad-card h2{font-size:18px;color:var(--text-dark);margin-bottom:6px;}
.ad-card p{margin:4px 0;color:var(--text-dark);font-size:13px;}
.task-card{margin-bottom:10px;}
.task-card h2{font-size:16px;color:var(--text-dark);margin-bottom:4px;}
.task-card p{margin:2px 0;color:var(--text-dark);font-size:12px;}
.task-card button{width:100%;margin-top:8px;padding:10px;font-size:13px;font-weight:700;border:none;border-radius:12px;background:linear-gradient(90deg,var(--secondary-btn-gradient-start),var(--secondary-btn-gradient-end)); 
    color:var(--text-light);cursor:pointer;transition:0.3s;}
.task-card button:hover{transform:scale(1.03);box-shadow:0 0 20px rgba(255,95,109,0.6);}
/* D√ºz…ôli≈ü: Tamamlanmƒ±≈ü d√ºym…ônin CSS-i */
.task-card button.completed{background:gray !important;box-shadow:none !important;cursor:not-allowed !important;pointer-events:none !important;opacity:0.55;}
/* G√∂zl…ôm…ô CSS-i */
.task-card button.waiting {
    background: orange !important;
    cursor: wait !important;
    opacity: 0.8;
}

.stats{display:flex;justify-content:space-around;margin-top:12px;}
.stat{background:var(--progress-bg);border-radius:10px;padding:10px 16px;}
.stat span{display:block;font-size:16px;font-weight:700;color:var(--text-dark);}
.stat label{font-size:11px;color:var(--text-dark);opacity:0.7;}
.progress{height:10px;background:var(--progress-bg);border-radius:6px;overflow:hidden;margin-top:12px;}
.progress-fill{height:100%;background:var(--accent);width:0%;transition:width .4s;} 
.ad-btn{width:100%;margin-top:12px;padding:12px;font-size:14px;font-weight:700;border:none;border-radius:14px;color:var(--text-light);cursor:pointer;transition:0.3s;background:linear-gradient(90deg,var(--btn-gradient-start),var(--btn-gradient-end));box-shadow:0 0 16px var(--btn-shadow);}
.ad-btn:hover:not(.waiting){transform:scale(1.03);box-shadow:0 0 20px var(--btn-shadow);}
.menu{
  position:fixed;
  bottom:15px;
  left:50%;
  transform:translateX(-50%);
  width:92%;
  display:flex;
  justify-content:space-around;
  background:var(--menu-bg);
  padding:10px;
  border-radius:22px;
  box-shadow:0 6px 20px rgba(0,0,0,.3);
  backdrop-filter:blur(8px);
  z-index: 50;
} 
.menu button{
  flex:1;
  margin:0 4px; 
  padding:10px 6px; 
  border:none;
  border-radius:16px;
  background:linear-gradient(90deg,var(--btn-gradient-start),var(--btn-gradient-end));
  color:var(--text-light);
  font-weight:700;
  transition:0.3s;
  font-size: 12px; /* D√ºz…ôli≈ü: Font size daha da ki√ßildildi */
  white-space: nowrap; 
}
.menu button.active{background:linear-gradient(90deg,var(--secondary-btn-gradient-start),var(--secondary-btn-gradient-end));box-shadow:0 0 18px rgba(255,95,109,0.6);}
#form{display:none;margin-top:12px;}
#form input{
    width:100%;
    padding:12px;
    margin:6px 0;
    border-radius:12px;
    border:1px solid var(--card-border);
    background:var(--card-bg);
    color:var(--input-text); 
}
#form input::placeholder {
    color: var(--input-text); 
    opacity: 0.5; 
}
#form button{width:100%;padding:14px;margin-top:8px;border:none;border-radius:14px;background:linear-gradient(90deg,var(--secondary-btn-gradient-start),var(--secondary-btn-gradient-end));color:var(--text-light);font-weight:700;cursor:pointer;}
.alert{margin-top:6px;padding:10px;border-radius:10px;display:none;font-weight:bold;text-align:left;}
.alert.error{background:#f8d7da;color:#842029;}
.alert.success{background:#d1e7dd;color:#0f5132;}

/* Dinamik Timer Bar √º√ß√ºn CSS */
.timer-bar-container {
  height: 6px;
  width: 0%;
  border-radius: 4px;
  margin-top: 6px;
  transition: width 1s linear; 
}

/* --- OYUN S∆èHƒ∞F∆èSƒ∞ STƒ∞LL∆èRƒ∞ --- */
.game-card h2 {
    font-size: 20px;
    color: var(--accent);
    margin-bottom: 15px;
}
.game-card p.game-info-text { 
    margin-bottom: 15px;
    font-size: 14px;
}
#betAmount {
    width: 100%;
    padding: 12px;
    margin: 8px 0;
    border-radius: 12px;
    border: 1px solid var(--card-border);
    background: var(--card-bg);
    color: var(--input-text);
    text-align: center;
    font-size: 16px;
    font-weight: 600;
}
.start-btn {
    width: 100%;
    padding: 14px;
    margin-top: 10px;
    border: none;
    border-radius: 14px;
    background: linear-gradient(90deg, #6dd5ed, #2193b0); 
    color: var(--text-light);
    font-weight: 700;
    cursor: pointer;
    transition: 0.3s;
    box-shadow: 0 4px 15px rgba(33, 147, 176, 0.4);
}
.start-btn:hover {
    transform: scale(1.02);
}

.box-container {
    display: flex;
    justify-content: space-around;
    gap: 15px;
    margin-top: 25px;
    min-height: 120px; 
}
.box {
    width: 100px; 
    height: 100px;
    border-radius: 15px;
    background: linear-gradient(135deg, #74ebd5, #9face6);
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    transition: transform 0.3s, box-shadow 0.3s, background 0.5s;
    position: relative;
    overflow: hidden;
    color: var(--text-light);
    font-size: 24px;
    font-weight: 700;
    border: 3px solid transparent; 
}
.box:hover:not(.disabled):not(.selected) {
    transform: translateY(-5px) scale(1.05);
    box-shadow: 0 12px 30px rgba(0,0,0,0.4);
}
.box.selected {
    border-color: var(--accent);
    transform: scale(1.05);
}
.box.opened-lose {
    background: #e0e0e0;
    box-shadow: none;
    cursor: default;
}
.box.opened-lose::after {
    content: "‚úñÔ∏è"; 
    font-size: 40px;
    animation: bounce 0.5s ease;
    color: var(--accent); /* ƒ∞tkinin r…ôngi */
}
.box.opened-win {
    background: linear-gradient(45deg, #FFD700, #FFA500); 
    border-color: #FFD700;
    box-shadow: 0 0 30px 10px rgba(255,215,0,0.7);
    animation: pulseGlow 1.5s infinite alternate;
    cursor: default;
}
.box.opened-win .prize-text {
    font-size: 32px;
    font-weight: 900;
    color: #fff;
    text-shadow: 0 0 10px rgba(0,0,0,0.8);
    animation: goldShine 2s infinite;
}
.box.disabled {
    pointer-events: none;
    opacity: 0.7;
}
.result-message {
    margin-top: 20px;
    font-size: 18px;
    font-weight: 700;
    min-height: 40px;
}
.result-message.lose {
    color: var(--accent);
}
.result-message.win {
    color: #FFD700;
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}
@keyframes pulseGlow {
    from { box-shadow: 0 0 20px 5px rgba(255,215,0,0.5); }
    to { box-shadow: 0 0 30px 10px rgba(255,215,0,0.9); }
}
@keyframes goldShine {
    0% { filter: brightness(1); }
    50% { filter: brightness(1.3); }
    100% { filter: brightness(1); }
}

/* Loading Screen Stili */
#loadingScreen{position:fixed;top:0; left:0;width:100%; height:100%;background:radial-gradient(circle at 20% 20%, #4e4376, #2b5876 70%);display:flex;justify-content:center;align-items:center;z-index:99999;backdrop-filter:blur(6px);animation:fadeBg 6s linear infinite;transition:opacity .7s ease;}
@keyframes fadeBg{0%{filter:brightness(1);}50%{filter:brightness(1.3);}100%{filter:brightness(1);}}
.loader-box{text-align:center;animation:fadeIn .8s ease;position:relative;}
.shine-circle{position:absolute;width:220px; height:220px;top:-70px; left:50%;transform:translateX(-50%);background:radial-gradient(circle, rgba(255,255,255,0.35), transparent 80%);filter:blur(40px);animation:pulse 3s infinite ease-in-out;}
@keyframes pulse{0%,100%{opacity:.4;}50%{opacity:1;}}
.loader-title{font-size:40px;font-weight:900;color:#ff4b2b; letter-spacing:2px;text-shadow:0 0 12px #ff416c, 0 0 35px rgba(255,75,43,0.9);margin-bottom:32px;}
.loader-bar{width:300px;height:16px;border-radius:20px;background:rgba(255,255,255,0.15);overflow:hidden;position:relative;box-shadow:0 0 14px rgba(255,255,255,0.3);}
.loader-fill{height:100%;width:0%;border-radius:20px;background:linear-gradient(90deg,#ff8008,#ffc837,#ffd452); animation:fillAnim 3s forwards ease-in-out;}
@keyframes fillAnim{from{width:0%;}to{width:100%;}}
.glow{position:absolute;top:0; left:0;width:100%; height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.9),transparent);animation:shine 1.6s infinite;}
@keyframes shine{0%{transform:translateX(-100%);}100%{transform:translateX(100%);}}
.loader-text{margin-top:14px;font-size:17px;color:#fff;letter-spacing:1px;animation:blink 1.4s infinite;}
@keyframes blink{0%,100%{opacity:1;}50%{opacity:.5;}}
</style>
</head>
<body id="body">
<div id="loadingScreen">
  <div class="loader-box">
    <div class="shine-circle"></div>
    <div class="loader-title">Qazanc AZ</div>
    <div class="loader-bar">
      <div class="loader-fill"></div>
      <div class="glow"></div>
    </div>
    <div class="loader-text" data-translate-key="loading">Y√ºkl…ônir...</div>
  </div>
</div>

<div class="container">
  
  <div class="top-controls">
    <button class="theme-toggle-btn" onclick="toggleTheme()">
        <span id="themeIcon" class="theme-icon">üîÜ</span>
    </button>
    
    <div class="lang-switcher-container">
        <button class="lang-current-btn" onclick="toggleDropdown()">
            <span id="currentLangDisplay">AZ</span>
            <span id="langArrow">‚¨áÔ∏è</span>
        </button>
        <div class="lang-dropdown" id="langDropdown">
            <button onclick="setLang('az')" id="langAzBtn">AZ</button>
            <button onclick="setLang('en')" id="langEnBtn">EN</button>
            <button onclick="setLang('tr')" id="langTrBtn">TR</button>
            <button onclick="setLang('ru')" id="langRuBtn">RU</button>
        </div>
    </div>
  </div>
  
  <div id="adsPage" class="page active">
    <div class="balance-card">
      <h3 data-translate-key="currentBalance">Balans</h3>
      <div class="amount"><span id="balance">0.0000</span> <span id="currencySymbol">‚Çº</span></div>
      <div class="usd"><span id="secondaryCurrencySymbol">$</span><span id="secondaryBalance">0.0000</span> <span id="secondaryCurrencyText">USD</span></div>
    </div>

    <div class="ad-card">
      <h2 data-translate-key="dailyAds">G√ºnl√ºk Reklamlar</h2>
      <p data-translate-key="adReward">H…ôr reklama g√∂r…ô <b>0.002 ‚Çº</b> qazanƒ±n</p>
      <div class="stats">
        <div class="stat"><span id="adsCount">0</span><label data-translate-key="watched">ƒ∞zl…ôn…ôn</label></div>
        <div class="stat"><span data-translate-key="maxCount">100</span><label data-translate-key="maximum">Maksimum</label></div>
      </div>
      <div class="progress"><div class="progress-fill" id="progress"></div></div>
      <p style="margin-top:6px;" data-translate-key="progressText">ƒ∞r…ôlil…ôyi≈ü: <span id="progressTextSpan">0/100</span></p>
      <button id="adBtn" class="ad-btn" data-translate-key="watchAd">Reklam</button>
      <div id="msg"></div>
    </div>
  </div>

  <div id="gamesPage" class="page">
    <div class="game-card">
        <h2 data-translate-key="gameTitle">Kutu Game üì¶</h2>
        <p class="game-info-text" data-translate-key="gameInfo">Minimum m…ôbl…ôƒü 1 ‚Çº. Qutudakƒ± 5 ‚Çº-ƒ± tap!</p>
        <input type="number" id="betAmount" placeholder="M…ôbl…ôƒü (‚Çº)" value="1" min="1" step="1">
        <button id="startGameBtn" class="start-btn" data-translate-key="startGame">Oyuna Ba≈üla</button>
        <div class="result-message" id="gameMessage"></div>

        <div class="box-container" id="boxContainer" style="display: none;">
            <div class="box" data-box-id="1">?</div>
            <div class="box" data-box-id="2">?</div>
            <div class="box" data-box-id="3">?</div>
        </div>

        <button id="playAgainBtn" class="start-btn" style="display: none; background: linear-gradient(90deg, #FF416C, #FF4B2B);" data-translate-key="playAgain">Yenid…ôn Oyna</button>

    </div>
  </div>


  <div id="tasksPage" class="page">
    <div class="task-card">
      <h2 data-translate-key="premiumTask">Premium Tap≈üƒ±rƒ±q</h2>
      <p data-translate-key="taskReward1">Kanala qo≈üul v…ô <b>0.1 ‚Çº</b> qazan!</p>
      <button id="joinBtn" data-translate-key="joinChannel">Kanala Qo≈üul</button>
    </div>
    <div class="task-card">
      <h2 data-translate-key="bonusTask">Bonus Tap≈üƒ±rƒ±q</h2>
      <p data-translate-key="taskReward2">Qrupa qo≈üul v…ô <b>0.1 ‚Çº</b> qazan!</p>
      <button id="joinBtn2" data-translate-key="joinGroup">Qrupa Qo≈üul</button>
    </div>
    <div class="task-card">
      <h2 data-translate-key="bonusTask">Bonus Tap≈üƒ±rƒ±q</h2>
      <p data-translate-key="taskReward3">Kanala qo≈üul v…ô <b>0.15 ‚Çº</b> qazan!</p>
      <button id="joinBtn3" data-translate-key="joinChannel">Kanala Qo≈üul</button>
    </div>
    <div class="task-card">
      <h2 data-translate-key="sponsorTask">Sponsor Tap≈üƒ±rƒ±q</h2>
      <p data-translate-key="taskReward4">Kanala qo≈üul v…ô <b>0.05 ‚Çº</b> qazan!</p>
      <button id="joinBtn4" data-translate-key="joinChannel">Kanala Qo≈üul</button>
    </div>
  </div>

  <div id="walletPage" class="page">
    <div class="balance-card">
      <h3 data-translate-key="withdrawBalance">Balans</h3>
      <div class="amount"><span id="balance2">0.0000</span> <span id="currencySymbol2">‚Çº</span></div>
      <div class="usd"><span id="secondaryCurrencySymbol2">$</span><span id="secondaryBalance2">0.0000</span> <span id="secondaryCurrencyText2">USD</span></div>
    </div>
    <h2 style="text-align:center;margin-bottom:12px;color:var(--text-dark);" data-translate-key="withdrawTitle">√áƒ±xarƒ±≈ü</h2>
    <div class="method-list" id="methods">
      
      <div class="method" data-type="m10">
          <img src="https://i.postimg.cc/Kj94hVNG/unnamed.png" alt="M10 Logo" class="method-logo">
          <span class="method-text">M10</span>
          <span class="min-withdraw-label" data-min-key="m10">5 ‚Çº</span>
      </div>
      <div class="method" data-type="azercell">
          <img src="https://i.postimg.cc/qM5gmPqZ/applogo512.png" alt="Azercell Logo" class="method-logo">
          <span class="method-text">Azercell</span>
          <span class="min-withdraw-label" data-min-key="azercell">5 ‚Çº</span>
      </div>
      <div class="method" data-type="bakcell">
          <img src="https://i.postimg.cc/Pqmx5N49/images.jpg" alt="Bakcell Logo" class="method-logo">
          <span class="method-text">Bakcell</span>
          <span class="min-withdraw-label" data-min-key="bakcell">5 ‚Çº</span>
      </div>
      <div class="method" data-type="nar">
          <img src="https://i.postimg.cc/4NmxhWPy/images.png" alt="Nar Logo" class="method-logo">
          <span class="method-text">Nar</span>
          <span class="min-withdraw-label" data-min-key="nar">5 ‚Çº</span>
      </div>
      <div class="method" data-type="bank">
          <img src="https://i.postimg.cc/L6H0yWwZ/42492-bank-1024.png" alt="Bank Logo" class="method-logo bank-logo">
          <span class="method-text" data-translate-key="bankCard">Bank</span>
          <span class="min-withdraw-label" data-min-key="bank">5 ‚Çº</span>
      </div>
      <div class="method" data-type="usdt">
          <img src="https://i.postimg.cc/X7HxsY98/Tether-USDT-Logo.png" alt="USDT Logo" class="method-logo">
          <span class="method-text">USDT</span>
          <span class="min-withdraw-label" data-min-key="usdt">17 ‚Çº</span>
      </div>
    </div>
    <div class="form" id="form">
      <button id="backBtn" style="background:none;border:none;color:var(--accent);font-weight:700;">‚¨Ö <span data-translate-key="back">Geri</span></button>
      <input id="details" placeholder="">
      <input id="amount" type="number" placeholder="M…ôbl…ôƒü">
      <button id="withdrawBtn" data-translate-key="withdraw">√áƒ±xarƒ±≈ü Et</button>
      <div id="alert" class="alert"></div>
    </div>
  </div>

</div>

<div class="menu">
  <button onclick="showPage('adsPage',this)" class="active" data-translate-key="home">Ev</button>
  <button onclick="showPage('gamesPage',this)" data-translate-key="games">Oyunlar</button>
  <button onclick="showPage('tasksPage',this)" data-translate-key="tasks">G√∂revler</button>
  <button onclick="showPage('walletPage',this)" data-translate-key="wallet">C√ºzdan</button>
</div>

<script src="//libtl.com/sdk.js" data-zone="10024800" data-sdk="show_10024800"></script>

<script>
// --- TEMA ƒ∞DAR∆èETM∆èSƒ∞ ---
const THEME_KEY = 'theme';
const body = document.getElementById('body');
const themeIcon = document.getElementById('themeIcon');

function applyTheme(isDark) {
    if (isDark) {
        body.classList.add('dark-theme');
        themeIcon.textContent = 'üåô'; 
        safeSet(THEME_KEY, 'dark');
    } else {
        body.classList.remove('dark-theme');
        themeIcon.textContent = 'üîÜ'; 
        safeSet(THEME_KEY, 'light');
    }
}

function toggleTheme() {
    const isDark = body.classList.contains('dark-theme');
    applyTheme(!isDark);
}

const savedTheme = safeGet(THEME_KEY, 'light');
applyTheme(savedTheme === 'dark');


// --- VALYUTA V∆è M∆èZ∆èNN∆èL∆èR ---
const EXCHANGE_RATES = {
    AZN_TO_USD: 0.59, 
    AZN_TO_TRY: 30.00,  
    AZN_TO_RUB: 55.00 
};
const CURRENCIES = {
    'az': { main: 'AZN', symbol: '‚Çº', secondary: 'USD', secondarySymbol: '$' },
    'tr': { main: 'TRY', symbol: '‚Ç∫', secondary: 'USD', secondarySymbol: '$' },
    'en': { main: 'USD', symbol: '$', secondary: 'AZN', secondarySymbol: '‚Çº' },
    'ru': { main: 'RUB', symbol: '‚ÇΩ', secondary: 'USD', secondarySymbol: '$' }
};
const AZN_REWARD = 0.002;
const AZN_TASK_REWARDS = [0.1, 0.1, 0.15, 0.05]; 
const AZN_MIN_WITHDRAW = { m10: 5, azercell: 5, bakcell: 5, nar: 5, bank: 5, usdt: 17 }; 
const MIN_BET_AZN = 1; 
const PRIZE_AZN = 5; 

// Valyuta D…ôy…ôrl…ôrini Lokalizasiya ed…ôn k√∂m…ôk√ßi funksiyalar
function getLocalizedValue(aznAmount, lang, decimalCount = 2) {
    let localizedAmount = aznAmount;
    let symbol = CURRENCIES[lang].symbol;
    let format = (val) => val.toFixed(decimalCount); 

    if (lang === 'tr') {
        localizedAmount = aznAmount * EXCHANGE_RATES.AZN_TO_TRY;
        format = (val) => val.toFixed(0); // T√ºrk Lir…ôsi √º√ß√ºn tam …ôd…ôd g√∂st…ôrilir
    } else if (lang === 'en') {
        localizedAmount = aznAmount * EXCHANGE_RATES.AZN_TO_USD;
    } else if (lang === 'ru') {
        localizedAmount = aznAmount * EXCHANGE_RATES.AZN_TO_RUB;
        format = (val) => val.toFixed(0); // Rubl √º√ß√ºn tam …ôd…ôd g√∂st…ôrilir
    }
    
    // ∆èg…ôr AZN-d…ôdirs…ô, decimalCount-a uyƒüun formatlanƒ±r (4 onluq reklama g√∂r…ô)
    if (lang === 'az') {
        format = (val) => val.toFixed(decimalCount); 
    }
    
    return {
        amount: localizedAmount,
        formatted: format(localizedAmount),
        symbol: symbol
    };
}

function getLocalizedReward(lang) {
    return getLocalizedValue(AZN_REWARD, lang, 4); 
}

function getLocalizedTaskReward(lang, aznReward) {
    const info = getLocalizedValue(aznReward, lang, lang === 'en' ? 3 : 2);
    return `<b>${info.formatted} ${info.symbol}</b>`;
}

function getLocalizedGameInfo(lang) {
    const minBetInfo = getLocalizedValue(MIN_BET_AZN, lang, lang === 'en' ? 2 : 0);
    const prizeInfo = getLocalizedValue(PRIZE_AZN, lang, lang === 'en' ? 2 : 0);

    return {
        minBet: `${minBetInfo.formatted} ${minBetInfo.symbol}`,
        minBetFloat: parseFloat(minBetInfo.formatted),
        prize: `${prizeInfo.formatted} ${prizeInfo.symbol}`,
        symbol: minBetInfo.symbol
    };
}

function getLocalizedMinAmount(methodType, lang) {
    const aznMin = AZN_MIN_WITHDRAW[methodType];
    const currencyInfo = CURRENCIES[lang];
    let minAmount = aznMin;
    let format = (val) => val.toFixed(2);
    
    if (lang === 'tr') {
        minAmount = aznMin * EXCHANGE_RATES.AZN_TO_TRY;
        format = (val) => val.toFixed(0);
    } else if (lang === 'en') {
        minAmount = aznMin * EXCHANGE_RATES.AZN_TO_USD;
    } else if (lang === 'ru') {
        minAmount = aznMin * EXCHANGE_RATES.AZN_TO_RUB;
        format = (val) => val.toFixed(0);
    }
    
    return `${format(minAmount)} ${currencyInfo.symbol}`;
}


// --- T∆èRC√úM∆è M∆èLUMATLARI (Dƒ∞L S√ñZL√úY√ú) ---
const TRANSLATIONS = {
    'az': {
        pageTitle: 'Qazanc AZ',
        loading: 'Y√ºkl…ônir...',
        currentBalance: 'Balans',
        withdrawBalance: 'Balans',
        dailyAds: 'G√ºnl√ºk Reklamlar',
        adReward: (r) => `H…ôr reklama g√∂r…ô ${r} qazanƒ±n`, 
        watched: 'ƒ∞zl…ôn…ôn',
        maximum: 'Maksimum',
        maxCount: '100',
        progressText: 'ƒ∞r…ôlil…ôyi≈ü: ',
        watchAd: 'Reklam ƒ∞zle',
        adLimitReached: 'üì£ G√ºnd…ôlik limit…ô √ßatdƒ±nƒ±z!',
        watching: 'ƒ∞zl…ônir...',
        rewardAdded: (r) => `‚úÖ ${r} …ôlav…ô olundu!`, 
        wait: '‚è≥ {s}s g√∂zl…ôyin',
        premiumTask: 'Premium Tap≈üƒ±rƒ±q',
        bonusTask: 'Bonus Tap≈üƒ±rƒ±q',
        sponsorTask: 'Sponsor Tap≈üƒ±rƒ±q',
        taskReward1: (r) => `Kanala qo≈üul v…ô ${r} qazan!`,
        taskReward2: (r) => `Qrupa qo≈üul v…ô ${r} qazan!`,
        taskReward3: (r) => `Kanala qo≈üul v…ô ${r} qazan!`,
        taskReward4: (r) => `Kanala qo≈üul v…ô ${r} qazan!`,
        joinChannel: 'Kanala Qo≈üul',
        joinGroup: 'Qrupa Qo≈üul',
        withdrawTitle: '√áƒ±xarƒ±≈ü',
        bankCard: 'Bank Kartƒ±',
        back: 'Geri',
        withdraw: '√áƒ±xarƒ±≈ü Et',
        methodError: 'Metod se√ßin',
        detailsError: 'Detallarƒ± daxil edin',
        amountError: 'M…ôbl…ôƒüi d√ºzg√ºn daxil edin',
        minAmount: (min) => `Minimum m…ôbl…ôƒü ${min}`, 
        balanceError: 'Balans kifay…ôt etmir',
        withdrawSuccess: '‚úÖ √áƒ±xarƒ±≈ü g√∂nd…ôrildi! 48 saat …ôrzind…ô yerin…ô yetiril…ôc…ôk.',
        home: 'Ev',
        tasks: 'G√∂revler',
        wallet: 'C√ºzdan',
        placeholderDetails_m10: '10 r…ôq…ômli n√∂mr…ô',
        placeholderDetails_azercell: '050xxxxxxx',
        placeholderDetails_bakcell: '055xxxxxxx',
        placeholderDetails_nar: '070xxxxxxx',
        placeholderDetails_bank: '16 r…ôq…ômli kart n√∂mr…ôsi',
        placeholderDetails_usdt: 'TON adresi',
        placeholderAmount: 'M…ôbl…ôƒü',
        completed: 'Tamamlandƒ±', 
        games: 'Oyunlar',
        gameTitle: 'Kutu Game üì¶',
        // D√ºz…ôli≈ü: Lokal valyutada m…ôlumat verilir
        gameInfo: (minBet, prize) => `Minimum m…ôbl…ôƒü ${minBet}. Qutudakƒ± ${prize}-ƒ± tap!`,
        startGame: 'Oyuna Ba≈üla',
        gameBetError: (minBet) => `Minimum m…ôbl…ôƒü ${minBet} olmalƒ±dƒ±r v…ô balansƒ±nƒ±zda olmalƒ±dƒ±r!`,
        gameSelectBox: 'Qutulardan birini se√ßin:',
        gameLost: (bet) => `‚ùå T…ô…ôss√ºf! ${bet} uduzdunuz.`,
        gamePrizeWasIn: (boxId, prize) => `üí∏ ${prize} ${boxId}-ci qutuda idi!`,
        playAgain: 'Yenid…ôn Oyna',
        
    },
    'en': {
        pageTitle: 'Earn AZ',
        loading: 'Loading...',
        currentBalance: 'Balance',
        withdrawBalance: 'Balance',
        dailyAds: 'Daily Ads',
        adReward: (r) => `Earn ${r} for each ad`, 
        watched: 'Watched',
        maximum: 'Maximum',
        maxCount: '100',
        progressText: 'Progress: ',
        watchAd: 'Watch Ad',
        adLimitReached: 'üì£ Daily limit reached!',
        watching: 'Watching...',
        rewardAdded: (r) => `‚úÖ ${r} added!`, 
        wait: '‚è≥ {s}s wait',
        premiumTask: 'Premium Task',
        bonusTask: 'Bonus Task',
        sponsorTask: 'Sponsor Task',
        taskReward1: (r) => `Join channel and earn ${r}!`,
        taskReward2: (r) => `Join group and earn ${r}!`,
        taskReward3: (r) => `Join channel and earn ${r}!`,
        taskReward4: (r) => `Join channel and earn ${r}!`,
        joinChannel: 'Join Channel',
        joinGroup: 'Join Group',
        withdrawTitle: 'Withdrawal',
        bankCard: 'Bank Card',
        back: 'Back',
        withdraw: 'Withdraw',
        methodError: 'Select a method',
        detailsError: 'Enter details',
        amountError: 'Enter correct amount',
        minAmount: (min) => `Minimum amount ${min}`,
        balanceError: 'Insufficient balance',
        withdrawSuccess: '‚úÖ Withdrawal sent! It will be executed within 48 hours.',
        home: 'Home',
        tasks: 'Tasks',
        wallet: 'Wallet',
        placeholderDetails_m10: '10 digit M10 number',
        placeholderDetails_azercell: '050xxxxxxx',
        placeholderDetails_bakcell: '055xxxxxxx',
        placeholderDetails_nar: '070xxxxxxx',
        placeholderDetails_bank: '16 digit card number',
        placeholderDetails_usdt: 'TON address',
        placeholderAmount: 'Amount',
        completed: 'Completed', 
        games: 'Games',
        gameTitle: 'Box Game üì¶',
        // D√ºz…ôli≈ü: Lokal valyutada m…ôlumat verilir
        gameInfo: (minBet, prize) => `Min amount ${minBet}. Find the ${prize} in the box!`,
        startGame: 'Start Game',
        gameBetError: (minBet) => `Minimum amount must be ${minBet} and be in your balance!`,
        gameSelectBox: 'Select one of the boxes:',
        gameLost: (bet) => `‚ùå Sorry! You lost ${bet}.`,
        gamePrizeWasIn: (boxId, prize) => `üí∏ ${prize} was in box ${boxId}!`,
        playAgain: 'Play Again',
    },
    'tr': {
        pageTitle: 'Kazan AZ',
        loading: 'Y√ºkleniyor...',
        currentBalance: 'Bakiye',
        withdrawBalance: 'Bakiye',
        dailyAds: 'G√ºnl√ºk Reklamlar',
        adReward: (r) => `Her reklam i√ßin ${r} kazanƒ±n`, 
        watched: 'ƒ∞zlenen',
        maximum: 'Maksimum',
        maxCount: '100',
        progressText: 'ƒ∞lerleme: ',
        watchAd: 'Reklam ƒ∞zle',
        adLimitReached: 'üì£ G√ºnl√ºk sƒ±nƒ±ra ula≈ütƒ±nƒ±z!',
        watching: 'ƒ∞zleniyor...',
        rewardAdded: (r) => `‚úÖ ${r} eklendi!`, 
        wait: '‚è≥ {s}sn bekleyin',
        premiumTask: 'Premium G√∂rev',
        bonusTask: 'Bonus G√∂rev',
        sponsorTask: 'Sponsor G√∂revi',
        taskReward1: (r) => `Kanala katƒ±l ve ${r} kazan!`,
        taskReward2: (r) => `Gruba katƒ±l ve ${r} kazan!`,
        taskReward3: (r) => `Kanala katƒ±l ve ${r} kazan!`,
        taskReward4: (r) => `Kanala katƒ±l ve ${r} kazan!`,
        joinChannel: 'Kanala Katƒ±l',
        joinGroup: 'Gruba Katƒ±l',
        withdrawTitle: 'Para √áekme',
        bankCard: 'Banka Kartƒ±',
        back: 'Geri',
        withdraw: 'Para √áek',
        methodError: 'Y√∂ntem se√ßin',
        detailsError: 'Bilgileri girin',
        amountError: 'Miktarƒ± doƒüru girin',
        minAmount: (min) => `Minimum miktar ${min}`,
        balanceError: 'Yetersiz bakiye',
        withdrawSuccess: '‚úÖ √áekim talebi g√∂nderildi! 48 saat i√ßinde tamamlanacaktƒ±r.',
        home: 'Ana Sayfa',
        tasks: 'G√∂revler',
        wallet: 'C√ºzdan',
        placeholderDetails_m10: '10 haneli M10 numarasƒ±',
        placeholderDetails_azercell: '050xxxxxxx',
        placeholderDetails_bakcell: '055xxxxxxx',
        placeholderDetails_nar: '070xxxxxxx',
        placeholderDetails_bank: '16 haneli kart numarasƒ±',
        placeholderDetails_usdt: 'TON adresi',
        placeholderAmount: 'Miktar',
        completed: 'Tamamlandƒ±', 
        games: 'Oyunlar',
        gameTitle: 'Kutu Oyunu üì¶',
        // D√ºz…ôli≈ü: Lokal valyutada m…ôlumat verilir
        gameInfo: (minBet, prize) => `Minimum tutar ${minBet}. Kutudaki ${prize}-i bul!`,
        startGame: 'Oyuna Ba≈üla',
        gameBetError: (minBet) => `Minimum tutar ${minBet} olmalƒ± ve bakiyenizde bulunmalƒ±dƒ±r!`,
        gameSelectBox: 'Kutulardan birini se√ßin:',
        gameLost: (bet) => `‚ùå √úzg√ºn√ºm! ${bet} kaybettiniz.`,
        gamePrizeWasIn: (boxId, prize) => `üí∏ ${prize} ${boxId}. kutudaydƒ±!`,
        playAgain: 'Tekrar Oyna',
    },
    'ru': { 
        pageTitle: '–ó–∞—Ä–∞–±–æ—Ç–æ–∫ AZ',
        loading: '–ó–∞–≥—Ä—É–∑–∫–∞...',
        currentBalance: '–ë–∞–ª–∞–Ω—Å',
        withdrawBalance: '–ë–∞–ª–∞–Ω—Å',
        dailyAds: '–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –†–µ–∫–ª–∞–º–∞',
        adReward: (r) => `–ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ ${r} –∑–∞ –∫–∞–∂–¥—É—é —Ä–µ–∫–ª–∞–º—É`, 
        watched: '–ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ',
        maximum: '–ú–∞–∫—Å–∏–º—É–º',
        maxCount: '100',
        progressText: '–ü—Ä–æ–≥—Ä–µ—Å—Å: ',
        watchAd: '–°–º–æ—Ç—Ä–µ—Ç—å –†–µ–∫–ª–∞–º—É',
        adLimitReached: 'üì£ –î–æ—Å—Ç–∏–≥–Ω—É—Ç –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç!',
        watching: '–ü—Ä–æ—Å–º–æ—Ç—Ä...',
        rewardAdded: (r) => `‚úÖ ${r} –¥–æ–±–∞–≤–ª–µ–Ω–æ!`, 
        wait: '‚è≥ {s}—Å –æ–∂–∏–¥–∞–π—Ç–µ',
        premiumTask: '–ü—Ä–µ–º–∏—É–º –ó–∞–¥–∞–Ω–∏–µ',
        bonusTask: '–ë–æ–Ω—É—Å–Ω–æ–µ –ó–∞–¥–∞–Ω–∏–µ',
        sponsorTask: '–°–ø–æ–Ω—Å–æ—Ä—Å–∫–æ–µ –ó–∞–¥–∞–Ω–∏–µ',
        taskReward1: (r) => `–ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –∫–∞–Ω–∞–ª –∏ –∑–∞—Ä–∞–±–æ—Ç–∞–π—Ç–µ ${r}!`,
        taskReward2: (r) => `–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç–µ—Å—å –∫ –≥—Ä—É–ø–ø–µ –∏ –∑–∞—Ä–∞–±–æ—Ç–∞–π—Ç–µ ${r}!`,
        taskReward3: (r) => `–ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –∫–∞–Ω–∞–ª –∏ –∑–∞—Ä–∞–±–æ—Ç–∞–π—Ç–µ ${r}!`,
        taskReward4: (r) => `–ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –∫–∞–Ω–∞–ª –∏ –∑–∞—Ä–∞–±–æ—Ç–∞–π—Ç–µ ${r}!`,
        joinChannel: '–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è',
        joinGroup: '–í—Å—Ç—É–ø–∏—Ç—å –≤ –ì—Ä—É–ø–ø—É',
        withdrawTitle: '–í—ã–≤–æ–¥ –°—Ä–µ–¥—Å—Ç–≤',
        bankCard: '–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –ö–∞—Ä—Ç–∞',
        back: '–ù–∞–∑–∞–¥',
        withdraw: '–í—ã–≤–µ—Å—Ç–∏',
        methodError: '–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–±',
        detailsError: '–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ',
        amountError: '–í–≤–µ–¥–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—É–º–º—É',
        minAmount: (min) => `–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ ${min}`,
        balanceError: '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤',
        withdrawSuccess: '‚úÖ –ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –ë—É–¥–µ—Ç –∏—Å–ø–æ–ª–Ω–µ–Ω–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ 48 —á–∞—Å–æ–≤.',
        home: '–ì–ª–∞–≤–Ω–∞—è',
        tasks: '–ó–∞–¥–∞–Ω–∏—è',
        wallet: '–ö–æ—à–µ–ª–µ–∫',
        placeholderDetails_m10: '10-–∑–Ω–∞—á–Ω—ã–π –Ω–æ–º–µ—Ä M10',
        placeholderDetails_azercell: '050xxxxxxx',
        placeholderDetails_bakcell: '055xxxxxxx',
        placeholderDetails_nar: '070xxxxxxx',
        placeholderDetails_bank: '16-–∑–Ω–∞—á–Ω—ã–π –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã',
        placeholderDetails_usdt: 'TON –∞–¥—Ä–µ—Å',
        placeholderAmount: '–°—É–º–º–∞',
        completed: '–í—ã–ø–æ–ª–Ω–µ–Ω–æ', 
        games: '–ò–≥—Ä—ã',
        gameTitle: '–ò–≥—Ä–∞ –≤ –ö–æ—Ä–æ–±–∫–∏ üì¶',
        // D√ºz…ôli≈ü: Lokal valyutada m…ôlumat verilir
        gameInfo: (minBet, prize) => `–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ ${minBet}. –ù–∞–π–¥–∏ ${prize} –≤ –∫–æ—Ä–æ–±–∫–µ!`,
        startGame: '–ù–∞—á–∞—Ç—å –ò–≥—Ä—É',
        gameBetError: (minBet) => `–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å ${minBet} –∏ –±—ã—Ç—å –Ω–∞ –≤–∞—à–µ–º –±–∞–ª–∞–Ω—Å–µ!`,
        gameSelectBox: '–í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–Ω—É –∏–∑ –∫–æ—Ä–æ–±–æ–∫:',
        gameLost: (bet) => `‚ùå –ò–∑–≤–∏–Ω–∏—Ç–µ! –í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏ ${bet}.`,
        gamePrizeWasIn: (boxId, prize) => `üí∏ ${prize} –±—ã–ª–∞ –≤ –∫–æ—Ä–æ–±–∫–µ ${boxId}!`,
        playAgain: '–°—ã–≥—Ä–∞—Ç—å –°–Ω–æ–≤–∞',
    }
};

let currentLang = localStorage.getItem('lang') || 'az';

const LIMIT = 100;
const BAL_KEY='bal',COUNT_KEY='cnt',RESET_KEY='resetTime';
const JOIN_KEY='joined',JOIN_KEY2='joined2',JOIN_KEY3='joined3',JOIN_KEY4='joined4'; 

function safeGet(k,d=0){try{return JSON.parse(localStorage.getItem(k))??d;}catch{return d;}}
function safeSet(k,v){try{localStorage.setItem(k,JSON.stringify(v));}catch(e){}}

let bal=parseFloat(safeGet(BAL_KEY,0));
let cnt=parseInt(safeGet(COUNT_KEY,0));
let resetTime=safeGet(RESET_KEY,null);

function getNextResetTime(){
  const now=new Date();
  const AZ_OFFSET=4;
  let resetUTC=new Date(Date.UTC(
    now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(),
    23-AZ_OFFSET,0,0,0
  ));
  if(now.getTime()>resetUTC.getTime()){resetUTC.setUTCDate(resetUTC.getUTCDate()+1);}
  return resetUTC.getTime();
}

if(!resetTime||Date.now()>resetTime){
  cnt=0;
  resetTime=getNextResetTime();
  safeSet(RESET_KEY,resetTime);
  safeSet(COUNT_KEY,cnt);
}

// Balansƒ±n v…ô Valyutanƒ±n g√∂st…ôrilm…ôsi
function update(){
  const lang = currentLang;
  const rates = EXCHANGE_RATES;
  const currencyInfo = CURRENCIES[lang];
  
  let mainBalance = bal;
  let secondaryBalance = bal;
  
  let mainSymbol = currencyInfo.symbol;
  let secondarySymbol = currencyInfo.secondarySymbol;
  let secondaryText = currencyInfo.secondary;

  let mainFormat = (val) => val.toFixed(4);
  let secondaryFormat = (val) => val.toFixed(4);
  
  // Balansƒ± cari dilin valyutasƒ±na √ßeviririk
  if (lang === 'tr') {
      mainBalance = bal * rates.AZN_TO_TRY;
      secondaryBalance = bal * rates.AZN_TO_USD;
      mainFormat = (val) => val.toFixed(2);
      secondaryFormat = (val) => val.toFixed(4);
  } else if (lang === 'en') {
      mainBalance = bal * rates.AZN_TO_USD;
      if (currencyInfo.secondary === 'AZN') {
          secondaryBalance = bal; 
      }
      mainFormat = (val) => val.toFixed(4);
      secondaryFormat = (val) => val.toFixed(4);
  } else if (lang === 'ru') { 
      mainBalance = bal * rates.AZN_TO_RUB;
      secondaryBalance = bal * rates.AZN_TO_USD;
      mainFormat = (val) => val.toFixed(2);
      secondaryFormat = (val) => val.toFixed(4);
  } else { // AZ
      mainBalance = bal;
      secondaryBalance = bal * rates.AZN_TO_USD;
  }
  
  // ∆èsas balans
  document.getElementById('balance').textContent = mainFormat(mainBalance);
  document.getElementById('balance2').textContent = mainFormat(mainBalance);
  document.getElementById('currencySymbol').textContent = mainSymbol;
  document.getElementById('currencySymbol2').textContent = mainSymbol;
  
  // K√∂m…ôk√ßi balans (USD/AZN)
  document.getElementById('secondaryBalance').textContent = secondaryFormat(secondaryBalance);
  document.getElementById('secondaryBalance2').textContent = secondaryFormat(secondaryBalance);
  document.getElementById('secondaryCurrencySymbol').textContent = secondarySymbol;
  document.getElementById('secondaryCurrencySymbol2').textContent = secondarySymbol;
  document.getElementById('secondaryCurrencyText').textContent = secondaryText;
  document.getElementById('secondaryCurrencyText2').textContent = secondaryText;

  document.getElementById('adsCount').textContent=cnt;
  document.getElementById('progress').style.width=(cnt/LIMIT*100)+'%';
  const progressTextSpan = document.getElementById('progressTextSpan');
  if(progressTextSpan) progressTextSpan.textContent = `${cnt}/${LIMIT}`;
  safeSet(BAL_KEY,bal);
  safeSet(COUNT_KEY,cnt);
}

// Oyun S…ôhif…ôsini Lokalizasiya Ed…ôn Funksiya (∆èSAS D√úZ∆èLƒ∞≈û)
function updateGamePage() {
    const t = TRANSLATIONS[currentLang];
    const gameInfo = getLocalizedGameInfo(currentLang);
    
    betAmountInput.placeholder = `${t.placeholderAmount} (${gameInfo.symbol})`;
    betAmountInput.value = gameInfo.minBetFloat; // Min bet m…ôbl…ôƒüini inputa yerl…ô≈üdir
    betAmountInput.min = gameInfo.minBetFloat; 
    
    const gameInfoEl = document.querySelector('#gamesPage .game-info-text');
    if (gameInfoEl && typeof t.gameInfo === 'function') {
        gameInfoEl.textContent = t.gameInfo(
            gameInfo.minBet, 
            gameInfo.prize
        );
    }
}


// Tap≈üƒ±rƒ±qlar d√ºym…ôl…ôrini f…ôrdi olaraq yenil…ôy…ôn funksiya
const taskButtons = [
    { id: 'joinBtn', key: JOIN_KEY, rewardIndex: 0 },
    { id: 'joinBtn2', key: JOIN_KEY2, rewardIndex: 1 },
    { id: 'joinBtn3', key: JOIN_KEY3, rewardIndex: 2 },
    { id: 'joinBtn4', key: JOIN_KEY4, rewardIndex: 3 }
];

function updateTaskButtons() {
    const t = TRANSLATIONS[currentLang];
    
    taskButtons.forEach((task, index) => {
        const btn = document.getElementById(task.id);
        const isCompleted = safeGet(task.key, false);
        const rewardKey = `taskReward${index + 1}`;
        const localizedRewardText = getLocalizedTaskReward(currentLang, AZN_TASK_REWARDS[task.rewardIndex]);
        
        // Tap≈üƒ±rƒ±q m√ºkafatƒ± m…ôtnini yenil…ô
        const rewardEl = btn.parentElement.querySelector(`p[data-translate-key="${rewardKey}"]`);
        if (rewardEl && typeof t[rewardKey] === 'function') {
            rewardEl.innerHTML = t[rewardKey](localizedRewardText);
        }

        // D√ºym…ônin statusunu yenil…ô
        if (isCompleted) {
            btn.textContent = t.completed;
            btn.classList.add('completed');
            btn.disabled = true;
        } else {
            // Dil…ô uyƒüun d√ºym…ô m…ôtnini yenil…ô
            const btnKey = btn.getAttribute('data-translate-key');
            if (btnKey && t[btnKey]) {
                btn.textContent = t[btnKey];
            }
            btn.classList.remove('completed');
            btn.disabled = false;
        }
    });
}

// B√ºt√ºn t…ôrc√ºm…ôl…ôri t…ôtbiq ed…ôn …ôsas funksiya
function applyTranslations(lang) {
    const t = TRANSLATIONS[lang];
    if (!t) return;
    
    document.getElementById('pageTitle').textContent = t.pageTitle;
    document.getElementById('currentLangDisplay').textContent = lang.toUpperCase();
    
    document.querySelectorAll('[data-translate-key]').forEach(el => {
        const key = el.getAttribute('data-translate-key');
        
        if (key === 'adReward') {
            const rewardInfo = getLocalizedReward(lang);
            const formattedRewardText = `<b>${rewardInfo.formatted} ${rewardInfo.symbol}</b>`;
            if (typeof t[key] === 'function') {
                 el.innerHTML = t[key](formattedRewardText);
            }
        } else if (key.startsWith('taskReward')) {
            // Tap≈üƒ±rƒ±q m√ºkafatlarƒ± updateTaskButtons funksiyasƒ±nda yenil…ônir
        } else if (t[key] && typeof t[key] !== 'function') { 
            el.innerHTML = t[key];
        }
    });
    
    // Tap≈üƒ±rƒ±q m√ºkafatlarƒ±nƒ± yenil…ô
    updateTaskButtons(); 

    // √áƒ±xarƒ±≈ü metodlarƒ± √ºz…ôrind…ôki minimum m…ôbl…ôƒül…ôri yenil…ô
    document.querySelectorAll('.min-withdraw-label').forEach(label => {
        const methodType = label.getAttribute('data-min-key');
        if (methodType) {
            label.textContent = getLocalizedMinAmount(methodType, lang);
        }
    });
    
    const progressTextSpan = document.getElementById('progressTextSpan');
    if(progressTextSpan) {
        progressTextSpan.textContent = `${cnt}/${LIMIT}`;
    }
    
    update(); 
    updateGamePage(); 
    
    // Placeholderlarƒ± yenil…ô
    if (document.getElementById('form').style.display === 'block' && type) {
        setPlaceholders(type);
    }
}

// Placeholderlarƒ± t…ôyin ed…ôn funksiya
function setPlaceholders(methodType) {
    const t = TRANSLATIONS[currentLang];
    const phDetailsKey = `placeholderDetails_${methodType}`;
    
    details.placeholder = t[phDetailsKey] || t.detailsError;
    
    const currencyInfo = CURRENCIES[currentLang];
    amount.placeholder = `${t.placeholderAmount} (${currencyInfo.symbol})`;
}


// A√ßƒ±lan menyu funksiyasƒ±
function toggleDropdown() {
    const dropdown = document.getElementById('langDropdown');
    dropdown.classList.toggle('show');
    document.getElementById('langArrow').textContent = dropdown.classList.contains('show') ? '‚¨ÜÔ∏è' : '‚¨áÔ∏è';
}

function setLang(lang) {
    currentLang = lang;
    localStorage.setItem('lang', lang);
    
    document.getElementById('langArrow').textContent = '‚¨áÔ∏è'; 
    
    applyTranslations(lang);
    toggleDropdown(); 
}

// Reklam d√ºym…ôsi Funksiyasƒ± (∆èvv…ôlki kimi qalƒ±r)
const adBtn=document.getElementById('adBtn'), msg=document.getElementById('msg');
adBtn.onclick=()=>{
  const t = TRANSLATIONS[currentLang];
  const rewardInfo = getLocalizedReward(currentLang);
  
  if(cnt>=LIMIT){ msg.textContent=t.adLimitReached; return; }
  
  adBtn.disabled=true; 
  adBtn.classList.add('waiting');
  
  let s=10; 
  
  msg.innerHTML=`<span>${t.wait.replace('{s}', s)}</span><div id="timerBar" class="timer-bar-container"></div>`;

  try{if(typeof show_10024800==='function'){show_10024800();}}catch(e){} 
  
  let rewarded = false; 

  const tInterval=setInterval(()=>{
    s--;
    const timerBar=document.getElementById('timerBar');
    
    if(timerBar){
        const progressPercentage = (10 - s) / 10 * 100;
        const hue = (10 - s) * 36; 
        const color = `hsl(${hue}, 85%, 50%)`; 
        
        timerBar.style.width=`${progressPercentage}%`;
        timerBar.style.background=color; 
        timerBar.style.boxShadow = `0 0 8px ${color}`; 
    }
    
    if(s === 9 && !rewarded) { 
        bal+=AZN_REWARD; 
        cnt++; 
        update(); 
        rewarded = true; 
        
        const localizedRewardText = `<b>${rewardInfo.formatted} ${rewardInfo.symbol}</b>`;
        
        const rewardMsgElement = document.createElement('div');
        rewardMsgElement.innerHTML = t.rewardAdded(localizedRewardText);
        rewardMsgElement.style.marginTop = '10px';
        rewardMsgElement.style.fontWeight = 'bold';
        rewardMsgElement.id = 'rewardMsg';
        msg.appendChild(rewardMsgElement); 
        
        setTimeout(() => {
            const currentRewardMsg = document.getElementById('rewardMsg');
            if (currentRewardMsg) {
                 currentRewardMsg.remove();
            }
        }, 2000); 
    }
    
    const msgSpan = msg.querySelector('span');
    if (msgSpan) msgSpan.textContent = t.wait.replace('{s}', s);
    
    if(s<=0){
      clearInterval(tInterval);
      
      adBtn.disabled=false;
      adBtn.classList.remove('waiting');
      
      msg.textContent = ''; 
    }
  },1000);
};

// Tap≈üƒ±rƒ±q d√ºym…ôl…ôrinin klik funksiyalarƒ± (bir yer…ô yƒ±ƒüƒ±ldƒ±)
function handleTaskClick(taskKey, rewardIndex, channelLink) {
    const t = TRANSLATIONS[currentLang];
    const btn = document.getElementById(taskButtons.find(t => t.key === taskKey).id);
    
    if (safeGet(taskKey, false)) return;

    // Simulyasiya: Kanala y√∂nl…ôndir
    // window.open(channelLink, '_blank'); 

    // G√∂zl…ôm…ô statusu
    btn.disabled = true;
    btn.classList.add('waiting');
    btn.textContent = t.watching; 

    // 3 saniy…ô g√∂zl…ôm…ô
    setTimeout(() => {
        const reward = AZN_TASK_REWARDS[rewardIndex];
        bal += reward;
        safeSet(taskKey, true); // Tap≈üƒ±rƒ±ƒüƒ± tamamlanmƒ±≈ü kimi qeyd et
        update();
        
        const localizedRewardText = getLocalizedTaskReward(currentLang, reward);

        btn.textContent = t.completed;
        btn.classList.add('completed');
        btn.classList.remove('waiting');
        
        const successMsg = document.createElement('div');
        successMsg.innerHTML = t.rewardAdded(localizedRewardText);
        successMsg.className = 'alert success';
        successMsg.style.display = 'block';
        successMsg.style.marginTop = '10px';

        btn.parentElement.appendChild(successMsg);
        
        setTimeout(() => successMsg.remove(), 2000);

    }, 3000);
}

document.getElementById('joinBtn').onclick = () => handleTaskClick(JOIN_KEY, 0, 'https://t.me/kanal1');
document.getElementById('joinBtn2').onclick = () => handleTaskClick(JOIN_KEY2, 1, 'https://t.me/qrup1');
document.getElementById('joinBtn3').onclick = () => handleTaskClick(JOIN_KEY3, 2, 'https://t.me/kanal2');
document.getElementById('joinBtn4').onclick = () => handleTaskClick(JOIN_KEY4, 3, 'https://t.me/sponsor');


// --- KUTU OYUNU M∆èNTƒ∞Qƒ∞ ---
const startGameBtn = document.getElementById('startGameBtn');
const playAgainBtn = document.getElementById('playAgainBtn');
const betAmountInput = document.getElementById('betAmount');
const boxContainer = document.getElementById('boxContainer');
const gameMessage = document.getElementById('gameMessage');
const boxes = document.querySelectorAll('.box');

let gameActive = false;

// Oyunu sƒ±fƒ±rlamaq
function resetGame() {
    gameActive = false;
    startGameBtn.style.display = 'block';
    playAgainBtn.style.display = 'none';
    betAmountInput.style.display = 'block';
    boxContainer.style.display = 'none';
    gameMessage.textContent = '';
    
    boxes.forEach(box => {
        box.classList.remove('disabled', 'selected', 'opened-lose', 'opened-win');
        box.innerHTML = '?'; 
        box.onclick = handleBoxClick; 
    });
    
    updateGamePage(); 
}

// Oyuna Ba≈üla funksiyasƒ±
startGameBtn.onclick = () => {
    const t = TRANSLATIONS[currentLang];
    const gameInfo = getLocalizedGameInfo(currentLang);
    const betInLocal = parseFloat(betAmountInput.value);
    
    // Qoyulan m…ôbl…ôƒüi AZN-…ô √ßevir
    let betInAZN = betInLocal;
    if (currentLang === 'tr') {
        betInAZN = betInLocal / EXCHANGE_RATES.AZN_TO_TRY;
    } else if (currentLang === 'en') {
        betInAZN = betInLocal / EXCHANGE_RATES.AZN_TO_USD;
    } else if (currentLang === 'ru') {
        betInAZN = betInLocal / EXCHANGE_RATES.AZN_TO_RUB;
    }
    
    // Qoyulan m…ôbl…ôƒüin minimum m…ôbl…ôƒüd…ôn b√∂y√ºk v…ô balansda olub olmadƒ±ƒüƒ±nƒ± yoxla (AZN-…ô √ßevir…ôr…ôk)
    if (isNaN(betInLocal) || betInLocal < gameInfo.minBetFloat || bal < betInAZN) {
        gameMessage.textContent = t.gameBetError(gameInfo.minBet);
        gameMessage.className = 'result-message lose';
        return;
    }

    bal -= betInAZN;
    update();
    
    gameActive = true;
    startGameBtn.style.display = 'none';
    betAmountInput.style.display = 'none';
    boxContainer.style.display = 'flex';
    gameMessage.textContent = t.gameSelectBox;
    gameMessage.className = 'result-message';

    boxes.forEach(box => {
        box.classList.remove('disabled', 'selected', 'opened-lose', 'opened-win');
        box.innerHTML = '?';
        box.onclick = handleBoxClick;
    });
};

// Qutunun se√ßilm…ôsi
function handleBoxClick(event) {
    if (!gameActive) return;

    gameActive = false; 
    const selectedBox = event.currentTarget;
    const selectedId = parseInt(selectedBox.dataset.box-id);
    
    boxes.forEach(box => box.classList.add('disabled'));
    selectedBox.classList.add('selected');
    
    const t = TRANSLATIONS[currentLang];
    const gameInfo = getLocalizedGameInfo(currentLang);
    const betInLocal = getLocalizedValue(parseFloat(betAmountInput.value / (currentLang === 'az' ? 1 : (currentLang === 'en' ? EXCHANGE_RATES.AZN_TO_USD : (currentLang === 'tr' ? EXCHANGE_RATES.AZN_TO_TRY : EXCHANGE_RATES.AZN_TO_RUB)))), currentLang, currentLang === 'en' ? 2 : 0);
    
    // Qutunun a√ßƒ±lma prosesi
    setTimeout(() => {
        selectedBox.classList.add('opened-lose');
        selectedBox.innerHTML = ''; 

        gameMessage.textContent = t.gameLost(`${betInLocal.formatted} ${betInLocal.symbol}`);
        gameMessage.className = 'result-message lose';
        
        const remainingBoxes = Array.from(boxes).filter(b => b !== selectedBox);
        const winBox = remainingBoxes[Math.floor(Math.random() * remainingBoxes.length)];
        const winId = parseInt(winBox.dataset.boxId);

        // "Qalib" qutunu dramatik ≈ü…ôkild…ô a√ß
        setTimeout(() => {
            winBox.classList.remove('disabled');
            winBox.classList.add('opened-win');
            winBox.innerHTML = `<span class="prize-text">${gameInfo.prize}</span>`; 
            
            gameMessage.textContent += ` ${t.gamePrizeWasIn(winId, gameInfo.prize)}`;
            
            // Yenid…ôn Oyna d√ºym…ôsini g√∂st…ôr
            setTimeout(() => {
                playAgainBtn.style.display = 'block';
            }, 1000); 

        }, 1500); 

    }, 800); 
}

// B√ºt√ºn qutulara klik funksiyasƒ±nƒ± …ôlav…ô et
boxes.forEach(box => {
    box.onclick = handleBoxClick;
});

// Yenid…ôn Oyna funksiyasƒ±
playAgainBtn.onclick = resetGame;

// S…ôhif…ô Naviqasiyasƒ±
function showPage(id, btn){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.querySelectorAll('.menu button').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  
  if (id === 'tasksPage') {
    updateTaskButtons();
  } else if (id === 'gamesPage') {
    resetGame(); 
    updateGamePage(); 
  } else if (id === 'walletPage') {
     form.style.display='none';
     document.getElementById('methods').style.display='flex';
     alertBox.style.display='none';
     type='';
  }
}

// C√ºzdan √ßƒ±xarƒ±≈ü sistemi (∆èvv…ôlki kimi qalƒ±r)
const methods = document.querySelectorAll('.method');
const form = document.getElementById('form');
const details = document.getElementById('details');
const amount = document.getElementById('amount');
const alertBox = document.getElementById('alert');
let type = '';

methods.forEach(m=>{
  m.onclick=()=>{
    type=m.dataset.type;
    document.getElementById('methods').style.display='none';
    form.style.display='block';
    setPlaceholders(type);
    details.value='';
    amount.value='';
    alertBox.style.display='none';
  };
});

document.getElementById('backBtn').onclick=()=>{
  form.style.display='none';
  document.getElementById('methods').style.display='flex';
  alertBox.style.display='none';
  type='';
};

document.getElementById('withdrawBtn').onclick=()=>{
  const det = details.value.trim();
  const amt = parseFloat(amount.value);
  alertBox.style.display='none';
  const t = TRANSLATIONS[currentLang];

  if(!type){ showErr(t.methodError); return; }
  if(!det){ showErr(t.detailsError); return; }
  if(isNaN(amt) || amt <= 0){ showErr(t.amountError); return; }
  
  const aznMin = AZN_MIN_WITHDRAW[type];
  
  // Lokal minimumu yoxla
  let minAmountInLang = getLocalizedMinAmount(type, currentLang);
  // Yalnƒ±z r…ôq…ômi g√∂t√ºrm…ôk √º√ß√ºn regex istifad…ô
  const minAmountFloat = parseFloat(minAmountInLang.match(/[\d\.]+/)[0]);
  
  if(amt < minAmountFloat){ showErr(t.minAmount(minAmountInLang)); return; }
  
  // √áƒ±xarƒ±≈ü m…ôbl…ôƒüini AZN-…ô √ßevir
  let withdrawalAmountInAZN = amt;
  if (currentLang === 'tr') {
    withdrawalAmountInAZN = amt / EXCHANGE_RATES.AZN_TO_TRY;
  } else if (currentLang === 'en') {
    withdrawalAmountInAZN = amt / EXCHANGE_RATES.AZN_TO_USD;
  } else if (currentLang === 'ru') {
    withdrawalAmountInAZN = amt / EXCHANGE_RATES.AZN_TO_RUB;
  }
  
  if(withdrawalAmountInAZN > bal){ showErr(t.balanceError); return; }

  bal -= withdrawalAmountInAZN; 
  safeSet(BAL_KEY,bal);
  update();

  alertBox.textContent=t.withdrawSuccess;
  alertBox.className='alert success';
  alertBox.style.display='block';

  setTimeout(()=>{
    form.style.display='none';
    document.getElementById('methods').style.display='flex';
    alertBox.style.display='none';
    type='';
  }, 2000);
  
};

function showErr(msg){
  alertBox.textContent=msg;
  alertBox.className='alert error';
  alertBox.style.display='block';
}

// --- ƒ∞LKƒ∞N Y√úKL∆èNM∆è M∆èNTƒ∞Qƒ∞ ---

// Funksionallƒ±ƒüƒ± y√ºkl…ô
update();
applyTranslations(currentLang); 
updateGamePage(); 

// Loading Screen-i 3 saniy…ôd…ôn sonra baƒüla
setTimeout(()=>{
  const s=document.getElementById("loadingScreen");
  s.style.opacity="0";
  setTimeout(()=>s.style.display="none",700);
},3000);
</script>
</body>
</html>
